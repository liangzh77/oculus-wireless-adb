# Quest Wireless ADB Manager - GUI

图形界面版本的ADB设备管理工具，提供简单易用的界面来管理Quest无线ADB连接。

## 功能特性

- **设备扫描**: 自动发现局域网中的Quest设备（10秒倒计时，可提前停止）
- **设备列表**: 显示所有已保存的设备及其连接状态
- **连接管理**:
  - 连接/断开单个设备
  - 连接/断开所有设备
- **权限管理**:
  - 授予WRITE_SECURE_SETTINGS权限
  - 撤销WRITE_SECURE_SETTINGS权限
- **实时日志**: 查看所有操作的实时日志
- **状态栏**: 显示当前操作状态

## 启动方式

### Windows
双击运行 `run-gui.bat`

或者命令行运行：
```bash
python adb-gui.py
```

### Linux/Mac
```bash
python3 adb-gui.py
```

## 使用说明

### 1. 扫描设备
- 点击 **Scan Devices** 按钮开始扫描
- 扫描将持续10秒，期间显示倒计时
- 可以点击 **Stop Scan** 提前结束扫描
- 扫描完成后，设备列表会自动刷新并保存到 `devices.json`

### 2. 连接设备
- 在设备列表中选择一个设备
- 点击 **Connect** 连接选中的设备
- 或点击 **Connect All** 连接所有设备

### 3. 断开设备
- 在设备列表中选择一个设备
- 点击 **Disconnect** 断开选中的设备
- 或点击 **Disconnect All** 断开所有设备

### 4. 授予权限
- 确保设备已连接
- 在设备列表中选择一个设备
- 点击 **Grant Permission** 授予WRITE_SECURE_SETTINGS权限
- 或点击 **Grant All** 授予所有已连接设备的权限
- 此权限用于Quest应用控制系统设置（如音量、振动等）

### 5. 撤销权限
- 在设备列表中选择一个设备
- 点击 **Revoke Permission** 撤销权限
- 或点击 **Revoke All** 撤销所有已连接设备的权限

### 6. 刷新列表
- 点击 **Refresh List** 刷新设备连接状态

## 界面说明

```
┌─────────────────────────────────────────────────────┐
│ [Scan] [Stop] [Refresh]  扫描中... 7.5秒            │  ← 工具栏
├─────────────────────────────────────┬───────────────┤
│ 设备列表                            │  操作按钮      │
│ ┌────────────────────────────────┐ │ [Connect]     │
│ │ # │ Device Address │ Status    │ │ [Disconnect]  │
│ │ 1 │ 192.168.1.100  │ Connected │ │ [Connect All] │
│ │ 2 │ 192.168.1.101  │ Disconn...│ │ [Disconnect..]│
│ └────────────────────────────────┘ │ ───────────── │
│                                     │ [Grant Perm.] │
│                                     │ [Revoke Per.] │
│                                     │ [Grant All]   │
│                                     │ [Revoke All]  │
├─────────────────────────────────────┴───────────────┤
│ 日志                                                 │
│ ┌─────────────────────────────────────────────────┐ │
│ │ Starting device scan...                         │ │
│ │ Found: 192.168.1.100:5555                       │ │
│ │ Scan complete. Found 2 device(s)                │ │
│ └─────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────┤
│ Ready                                               │  ← 状态栏
└─────────────────────────────────────────────────────┘
```

## 依赖要求

- Python 3.6+
- tkinter (通常随Python一起安装)
- zeroconf (用于设备发现)

安装依赖：
```bash
pip install zeroconf
```

## 文件说明

- `adb-gui.py` - GUI应用主文件
- `run-gui.bat` - Windows启动脚本
- `devices.json` - 设备列表存储文件（自动生成）
- `discover-and-connect.py` - 命令行版本（原版）

## 注意事项

1. **首次使用**: 需要先扫描设备，或者使用命令行版本保存设备列表
2. **ADB路径**: 程序会自动查找系统ADB或使用 `platform-tools/adb.exe`
3. **设备状态**: 设备列表会显示实时的连接状态（Connected/Disconnected）
4. **线程安全**: 所有ADB操作都在后台线程执行，不会阻塞UI
5. **设备替换**: 每次扫描会完全替换原有设备列表

## 故障排除

### 扫描不到设备
- 确保Quest设备和电脑在同一局域网
- 确保Quest已开启无线ADB（在设备的开发者选项中）
- 尝试重新扫描或延长扫描时间

### 连接失败
- 检查设备是否在线
- 确保ADB已正确安装
- 尝试在Quest上重新启用无线ADB

### 授予权限失败
- 确保设备已成功连接
- 确保Quest上已安装目标应用
- 检查日志查看详细错误信息

## 许可证

与主项目相同
